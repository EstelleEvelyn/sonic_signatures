<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Plotting Z-Scores</title>
    <meta name="description" content="">
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <style type="text/css">
    body {
        font: 10px sans-serif;
    }
    .axis path,
    .axis line {
        fill: none;
        stroke: #000;
        shape-rendering: crispEdges;
    }
    /*.x.axis path {
        display: none;
    }*/
    .line {
        fill: none;
        stroke: steelblue;
        stroke-width: 1.5px;
    }
    </style>
</head>

<body>
  <div>
    Sort by
    <form id="sort", onchange = "sortOrder()"> <br>
      <input type="radio" name="role" value="protag" checked> Protagonist<br>
      <input type="radio" name="role" value="antag"> Antagonist<br>
      <input type="radio" name="role" value="fool"> Fool
    </form>
  </div>
  <div>
    Show
    <form id = "show", onchange = "drawUndraw()">  <br>
      <input type = "checkbox" value = "protag" checked> Protagonist<br>
      <input type = "checkbox" value = "antag" checked> Antagonist<br>
      <input type = "checkbox" value = "fool" checked> Fool
    </form>
  </div>
  <div>
    Compare<br>
    <select id="Play", onchange="onSelect()">
      <option value="">Play</option>
      <option value="AWW">All's Well That Ends Well</option>
      <option value="Ant">Antony and Cleopatra</option>
      <option value="AYL">As You Like It</option>
      <option value="Err">The Comedy of Errors</option>
      <option value="Cor">Coriolanus</option>
      <option value="Cym">Cymbeline</option>
      <option value="Ham">Hamlet</option>
      <option value="1H4">Henry IV, Part 1</option>
      <option value="2H4">Henry IV, Part 2</option>
      <option value="H5">Henry V</option>
      <option value="1H6">Henry VI, Part 1</option>
      <option value="2H6">Henry VI, Part 2</option>
      <option value="3H6">Henry VI, Part 3</option>
      <option value="H8">Henry VIII</option>
      <option value="JC">Julius Caesar</option>
      <option value="Jn">King John</option>
      <option value="Lr">King Lear</option>
      <option value="LLL">Love's Labor's Lost</option>
      <option value="Mac">Macbeth</option>
      <option value="MM">Measure for Measure</option>
      <option value="MV">The Merchant of Venice</option>
      <option value="Wiv">The Merry Wives of Windsor</option>
      <option value="MND">A Midsummer Night's Dream</option>
      <option value="Ado">Much Ado About Nothing</option>
      <option value="Oth">Othello</option>
      <option value="Per">Pericles</option>
      <option value="R2">Richard II</option>
      <option value="R3">Richard III</option>
      <option value="Rom">Romeo and Juliet</option>
      <option value="Shr">The Taming of the Shrew</option>
      <option value="Tmp">The Tempest</option>
      <option value="Tim">Timon of Athens</option>
      <option value="Tit">Titus Andronicus</option>
      <option value="Tro">Troilus and Cressida</option>
      <option value="TN">Twelfth Night</option>
      <option value="TGV">The Two Gentlemen of Verona</option>
      <option value="TNK">The Two Noble Kinsmen</option>
      <option value="WT">The Winter's Tale</option>
    </select>

    <select id="Character">
      <option value = "">Character</option>
    </select>

  </div>
</body>

<script type = "text/javascript">
  function onSelect() {
    d3.select('#Character')
      .selectAll('option')
      .remove();

    var play = document.getElementById('Play').value
    var dataURL = '/options/' + play
    d3.json(dataURL, function(error, data) {
      var data = data;
      d3.select('#Character')
        .selectAll('option')
        .data(data)
        .enter()
        .append('option')
        .text(function(d) { return d; })
        .property('value', function(d) {
          return play + "_" + d;
        })
    });
  }
</script>
<!-- <script type="text/javascript">
//http://bl.ocks.org/phil-pedruco/88cb8a51cdce45f13c7e

//setting up empty data array
var data = [];

getData(); // popuate data
onLoad();

// line chart based on http://bl.ocks.org/mbostock/3883245
var margin = {
        top: 20,
        right: 20,
        bottom: 30,
        left: 50
    },
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var x = d3.scale.linear()
    .range([0, width]);

var y = d3.scale.linear()
    .range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left");

var line = d3.svg.line()
    .x(function(d) {
        return x(d.q);
    })
    .y(function(d) {
        return y(d.p);
    });

var phon = d3.svg.line()
    .x(function(d) {
        return x(d);
    })
    .y(function(d) {
        return y(d.p);
    });

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

x.domain(d3.extent(data, function(d) {
    return d.q;
}));
y.domain(d3.extent(data, function(d) {
    return d.p;
}));

svg.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis);

svg.append("g")
    .attr("class", "y axis")
    .call(yAxis);

svg.append("path")
    .datum(data)
    .attr("class", "line")
    .attr("d", line);

function onLoad() {
  var dataURL = '/load'
  d3.json(dataURL, function(error, data) {
    var data = data;
    svg.selectAll("line")
      .data(data)
      .enter()
      .append("line")
      .attr("x1", x(0))//function(d) { return x(d.data); })
      .attr("x2", x(0))//function(d) { return x(d.data); })
      .attr("y1", y(0))
      .attr("y2", y(450))//function(d) {return y(gaussian(d.data)); })
      .style("stroke", "black")
    });
}

function getData() {

// loop to populate data array with
// probabily - quantile pairs
for (var i = 0; i < 100000; i++) {
    q = normal() // calc random draw from normal dist
    p = gaussian(q) // calc prob of rand draw
    el = {
        "q": q,
        "p": p
    }
    data.push(el)
};

// need to sort for plotting
//https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort
data.sort(function(x, y) {
    return x.q - y.q;
});
}

// from http://bl.ocks.org/mbostock/4349187
// Sample from a normal distribution with mean 0, stddev 1.
function normal() {
    var x = 0,
        y = 0,
        rds, c;
    do {
        x = Math.random() * 2 - 1;
        y = Math.random() * 2 - 1;
        rds = x * x + y * y;
    } while (rds == 0 || rds > 1);
    c = Math.sqrt(-2 * Math.log(rds) / rds); // Box-Muller transform
    return x * c; // throw away extra sample y * c
}

//taken from Jason Davies science library
// https://github.com/jasondavies/science.js/
function gaussian(x) {
	var gaussianConstant = 1 / Math.sqrt(2 * Math.PI),
		mean = 0,
    	sigma = 1;

    x = (x - mean) / sigma;
    return gaussianConstant * Math.exp(-.5 * x * x) / sigma;
};
</script>

</html>
